<main id="bg">
  <div>
    <form (ngSubmit)="registrarUsuario()" [formGroup]="formRegister" class="container my-3 justify-content-center col-9 border caja2">
      <div class="caja-titulo">
        <h3>Registrate</h3>
      </div>
      <div class="row">
        <!-- Nombre -->
        <div class="col-md-6 col-lg-6">
          <label for="first_name"></label>
          <input type="text" formControlName="first_name" id="first_name" class="form-control" placeholder="Nombre" maxlength="30">
          <div *ngIf="first_name.invalid && (first_name.dirty || first_name.touched)" class="alert alert-danger mt-2">
            <div *ngIf="first_name.errors?.['required']">El nombre es obligatorio.</div>
            <div *ngIf="first_name.errors?.['minlength']">El nombre debe tener al menos 3 caracteres.</div>
            <div *ngIf="first_name.errors?.['pattern']">El nombre debe contener solo letras.</div>
          </div>
        </div>
        
        <!-- Apellido -->
        <div class="col-md-6 col-lg-6">
          <label for="last_name"></label>
          <input type="text" formControlName="last_name" id="last_name" class="form-control" placeholder="Apellido" maxlength="30">
          <div *ngIf="last_name.invalid && (last_name.dirty || last_name.touched)" class="alert alert-danger mt-2">
            <div *ngIf="last_name.errors?.['required']">El apellido es obligatorio.</div>
            <div *ngIf="last_name.errors?.['minlength']">El apellido debe tener al menos 3 caracteres.</div>
            <div *ngIf="last_name.errors?.['pattern']">El apellido debe contener solo letras.</div>
          </div>
        </div>

        <!-- Contraseña -->
        <div class="col-md-6 col-lg-6">
          <label for="password"></label>
          <input type="password" formControlName="password" id="password" class="form-control" placeholder="Contraseña">
          <div *ngIf="password.invalid && (password.dirty || password.touched)" class="alert alert-danger mt-2">
            <div *ngIf="password.errors?.['required']">La contraseña es obligatoria.</div>
            <div *ngIf="password.errors?.['pattern']">La contraseña debe tener al menos 8 caracteres, incluyendo al menos una letra minúscula, una letra mayúscula y un número.</div>
          </div>
        </div>

        <!-- Confirmar Contraseña -->
        <div class="col-md-6 col-lg-6">
          <label for="password2"></label>
          <input type="password" formControlName="password2" id="password2" class="form-control" placeholder="Confirmar Contraseña">
          <div *ngIf="password2.invalid && (password2.dirty || password2.touched)" class="alert alert-danger mt-2">
            <div *ngIf="password2.errors?.['required']">La confirmación de la contraseña es obligatoria.</div>
            <div *ngIf="password2.errors?.['passwordMismatch']">Las contraseñas deben ser iguales.</div>
          </div>
        </div>

        <!-- Email -->
        <div class="col-md-6 col-lg-6">
          <label for="email"></label>
          <input type="email" formControlName="email" id="email" class="form-control" placeholder="Email">
          <div *ngIf="email.invalid && (email.dirty || email.touched)" class="alert alert-danger mt-2">
            <div *ngIf="email.errors?.['required']">El email es obligatorio.</div>
            <div *ngIf="email.errors?.['email']">El email debe ser válido.</div>
          </div>
        </div>

        <!-- Teléfono -->
        <div class="col-md-6 col-lg-6">
          <label for="telefono"></label>
          <input type="tel" formControlName="telefono" id="telefono" class="form-control" placeholder="Teléfono">
          <div *ngIf="telefono.invalid && (telefono.dirty || telefono.touched)" class="alert alert-danger mt-2">
            <div *ngIf="telefono.errors?.['required']">El número de teléfono es obligatorio.</div>
            <div *ngIf="telefono.errors?.['pattern']">El número de teléfono debe ser válido.</div>
          </div>
        </div>

        <!-- Dirección -->
        <div class="col-md-6 col-lg-6">
          <div formGroupName="direccion">
            <label for="calle"></label>
            <input type="text" formControlName="calle" id="calle" class="form-control" placeholder="Calle">
            <div *ngIf="calle.invalid && (calle.dirty || calle.touched)" class="alert alert-danger mt-2">
              <div *ngIf="calle.errors?.['required']">La calle es obligatoria.</div>
              <div *ngIf="calle.errors?.['pattern']">La calle debe ser válida.</div>
            </div>
          </div>
        </div>
        
        <div class="col-md-6 col-lg-6">
          <div formGroupName="direccion">
            <label for="numero"></label>
            <input type="text" formControlName="numero" id="numero" class="form-control" placeholder="Número">
            <div *ngIf="numero.invalid && (numero.dirty || numero.touched)" class="alert alert-danger mt-2">
              <div *ngIf="numero.errors?.['required']">El número es obligatorio.</div>
              <div *ngIf="numero.errors?.['pattern']">El número debe ser válido.</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Botón de Submit -->
      <div>
        <button type="submit" class="mt-3 input-submit" [disabled]="formRegister.invalid" value="registrar" id="submitButton">Enviar</button>
      </div>

      <!-- Enlace de Login -->
      <div class="text-center mt-3">
        <a class="link" routerLink="/login">¿Ya tenés una cuenta? <b>Iniciá sesión</b></a>
      </div>
    </form>
    <br>
  </div>
</main>

<!-- Mensaje flotante -->
<div *ngIf="showSuccessMessage" class="success-message">
  {{ successMessage }}
</div>
